<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>generators ajax</title>
</head>
<body>
</body>
<script> 
    function ajax(url) {
        fetch(url)
            .then(data => data.json())
            .then(data => dados.next(data))
            // a segunda execução em diante
    }

    function* ajaxGen() {
        console.log('Buscando posts...')
        console.log(yield ajax('https://willianjusten.com.br/search.json'))

        console.log('Buscando dados no Github...')
        console.log(yield ajax('https://api.github.com/users/colares'))
        
        console.log('Buscando dados no Github 2...')
        console.log(yield ajax('https://api.github.com/users/colares'))
    }

    const dados = ajaxGen()
    dados.next() // esta é a primeira execução dos generator

</script>
</html>
